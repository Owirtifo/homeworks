## Домашнее задание к занятию "11.2 Микросервисы: принципы"

### Задача 1: API Gateway 

1. Предлагается следующие API Gateway:

| Решение          | Маршрутизация | Аутентификация | Терминация HTTPS | Ограничение скорости | Кэширование | Сообщество | Модель распространения |
|------------------|---------------|----------------|------------------|----------------------|-------------|------------|------------------------|
| Kong API Gateway | +             | +              | +                | +                    | +           | Большое    | open source, Apache 2.0  |
| Tyk              | +             | +              | +                | +                    | +           | Среднее    | open source, MPL         |
| HAProxy          | +             | +              | +                | +                    | +           | Среднее    | open source              |
| NGINX            | +             | +              | +                | +                    | +           | Большое    | open source              |
| Apache APISIX    | +             | +              | +                | +                    | +           | Среднее    | open source, Apache 2.0  |
| KrakenD          | +             | +              | +                | +                    | +           | Маленькое  | open source, Apache 2.0  |

Предпочтительнее выбрать Kong API Gateway, так как это современное и популярное решение с открытым исходным кодом и имеет большое сообщество. Kong также отлично расширяется с помощью различных плагинов.

Для небольших проектов целесообразнее использовать облачный API Gateway Yandex API Gateway, который имеет нетарифицируемый объем услуг.

2. Сравнение брокеров сообщений:

| Требования \ Брокер                                   | Kafka | Redis | RabbitMQ | ActiveMQ |
|-------------------------------------------------------|-------|-------|----------|----------|
| Поддержка кластеризации для обеспечения надежности    | +     | +     | +        | +        |
| Хранение сообщений на диске в процессе доставки       | +     | -     | +        | +        |
| Высокая скорость работы                               | +     | +     | +        | -        |
| Поддержка различных форматов сообщений                | +     | +     | +        | -        |
| Разделение прав доступа к различным потокам сообщений | +     | +     | +        | +        |
| Простота эксплуатации                                 | +     | +     | +        | +        |

Выбор конечного решения будет зависеть от задач сервиса. 

Redis отлично подходит для обмена кратковременными сообщениями, когда не требуется персистентность.

Если требуется длительное хранение больших объемов данных для их дальнейшего использования и высокая пропускная способность, то для этих целей подойдет Kafka. Она идеально подходит в тех случаях, где требуется персистентность. Kafka — это легко масштабируемая система, обладающая повышенной отказоустойчивостью, что очень важно в крупных проектах.

RabbitMQ подойдет если требуется сложная и гибкая маршрутизация. RabbitMQ более простой в установке и настройке, успешно справляется с асинхронным обменом данными в микросервисной архитектуре. Не требует дополнительных компонентов и затрат на дисковые ресурсы, так как все сообщения после чтения из очереди удаляются. Отличный выбор, если нет завышенных требований к отказоустойчивости и пропускной способности.